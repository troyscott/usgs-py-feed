<!DOCTYPE html>
<html>
<head>

<title>Home</title>
<meta name="viewport" content="width=device-width, maximum-scale=1.0" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="stylesheet" type="text/css" href="main.css" />

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

</head>
<body>

<!-- Main Page -->

<div data-role="page" id="main">

	<div data-role="header">
	<h1>USGS Report Menu </h1>
	<a href="#options"  class="ui-btn-right" data-rel="dialog" data-transistion="pop" 
		data-icon="gear" data-theme="b" >
		Options
	</a>
	</div>
	<div data-role="content">
 	<p><a href="#last_hour_m0-page" data-role="button">Earthquakes - Past Hour - M0+</a></p>
	<p><a href="#hrm1-page" data-role="button">Earthquakes - Past Hour - M1+</a></p>
 	<p><a href="#pdm2.5-page" data-role="button">Earthquakes - Past Day - 2.5+</a></p>
	<p><a href="#p7dm5-page" data-role="button">Earthquakes - Past 7 Days - 5+</a></p>
	<p><a href="#pd7dm7-page" data-role="button">Earthquakes - Past 7 Days - 7+</a></p>
	<!-- Creates a Pop-up dialog box for options -->
	</div>

	<div data-role="footer" data-position="fixed">
	<a href="http://earthquake.usgs.gov/earthquakes/catalogs/">Data provided by US Geological Survey</a>
	</div>

</div>


<!-- Hourly - M0+ -->

<div data-role="page" id="last_hour_m0-page" data-theme="a">
	<div data-role="header" data-position="inline" >
		<h1> Past Hour - M0+</h1>
		<a href="index.html" data-icon="home" data-theme="b" >Home</a>
	</div>
	<div data-role="content" data-theme="a">
	<ul id="hrm0" data-role="listview" data-inset="true" data-split-theme="b" >
	
	</ul>
	
	</div>

	<div data-role="footer" data-position="fixed">
	<a href="http://earthquake.usgs.gov/earthquakes/catalogs/">Data provided by US Geological Survey</a>
	</div>

</div>

<!-- Options -->
<div data-role="page" id="options" data-theme="b">
	<div data-role="header" data-theme="b" >
	<h1>Options</h1>
	</div>
	<div data-role="content" data-theme="b">
	<ul data-role="listview">
	<li><a href="#">Set Location</a></li>
	<li><a href="#">Enable Twitter</a></li>
	<li><a href="#">Set Alerts</a></li>
	<li><a href="#">Screen Refresh</a></li>
	</ul>

	</div>
	<div data-role="footer">
	</div>
</div>

<!-- Page Logic -->

<script type="text/javascript">

(function($){

        console.log('jQuery Works');
        console.log(window.navigator.standalone);
		// bind the page create event to the hourly m0+ ajax request
		var reports = ['last_hour_m0'];

		var page = '#' + reports[0] + '-page';
		var url = 'quake/' + reports[0]

		$(page).bind('pagecreate', function() {

        $.ajax({	
			url: url, //'quake/last_hour_m0',
			dataType:  'json',
			success: function(data) {		
                var feed = []
				$.each(data.rss, function(index, field) {
					console.log(field.guid);
                	feed.push('<li><h3>' + field.title + '</h3></li>');

                });
                jQuery(feed.join('\n')).appendTo('#hrm0');
                console.log(feed.join('\n'));
			},
			
			complete: function(){

				$('#hrm0').listview('refresh');
			}

        }); // ajax call

		}); // pagecreate
		

})(jQuery);


</script>
</body>
</html>
